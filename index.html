<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>One Piece • Trang cá nhân của N.K</title>
  <meta name="description" content="Trang cá nhân về One Piece: hồ sơ băng Mũ Rơm, timeline, bộ sưu tập, blog và liên hệ." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b1220;             /* nền tối sâu */
      --bg-soft: #0f172a;         /* block */
      --card: #0b132b;            /* card */
      --elev: rgba(255,255,255,.06);
      --text: #e5e7eb;
      --muted: #94a3b8;
      --brand: #38bdf8;          /* cyan */
      --brand-2: #a78bfa;        /* violet */
      --ok: #10b981;             /* green */
      --warn: #f59e0b;           /* amber */
      --danger: #ef4444;         /* red */
      --radius: 18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
.card {
  position: relative; /* để định vị tuyệt đối con */
}

.like-btn {
  margin-top:.6rem;
  cursor:pointer;
  user-select:none;
  font-weight:600;
  color:#f87171;
  position: absolute;
  bottom: 10px;
  right: 12px;
  margin-top: 0; /* bỏ margin cũ */
}

.like-btn:hover { transform:scale(1.05); }
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text); background: radial-gradient(1200px 600px at 80% -10%, rgba(56,189,248,.18), transparent 60%),
                         radial-gradient(800px 400px at -10% 10%, rgba(167,139,250,.20), transparent 60%),
                         var(--bg);
    }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    .container{width:min(1100px, 92vw); margin-inline:auto}
    .btn{display:inline-flex; align-items:center; gap:.6rem; border:1px solid rgba(255,255,255,.12);
         padding:.9rem 1.1rem; border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
         box-shadow:var(--shadow); color:var(--text); font-weight:600; transition:.2s transform, .2s background, .2s border-color}
    .btn:hover{transform:translateY(-1px); border-color:rgba(56,189,248,.35)}
    .btn.primary{background:linear-gradient(180deg, rgba(56,189,248,.35), rgba(56,189,248,.12)); border-color: rgba(56,189,248,.45)}
    .chip{font-size:.8rem; padding:.35rem .65rem; border-radius:999px; background:rgba(56,189,248,.18); border:1px solid rgba(56,189,248,.35); color:#cffafe}

    /* Navbar */
    .nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(10px); background:rgba(10,15,26,.65);
         border-bottom:1px solid rgba(255,255,255,.06)}
    .nav-wrap{display:flex; align-items:center; justify-content:space-between; padding:.8rem 0}
    .brand{display:flex; align-items:center; gap:.7rem; font-weight:900; letter-spacing:.3px}
    .brand-logo{width:34px; height:34px; border-radius:10px; background:radial-gradient(circle at 30% 30%, #fde047, #f97316 55%);
                display:grid; place-items:center; box-shadow: 0 6px 20px rgba(253, 224, 71, .25)}
    .brand-logo span{font-weight:900; color:#0b1220}
    .nav-links{display:flex; gap:1rem; align-items:center}
    .nav-links a{opacity:.9; padding:.55rem .8rem; border-radius:12px}
    .nav-links a:hover{background:rgba(255,255,255,.06)}

    /* Hero */
    .hero{padding:clamp(3rem, 6vw, 6rem) 0 3rem}
    .hero-grid{display:grid; grid-template-columns: 1.2fr .8fr; gap:2rem; align-items:center}
    .hero h1{font-size:clamp(2rem, 5vw, 3.4rem); margin:0 0 .8rem; line-height:1.05}
    .kicker{display:flex; gap:.6rem; align-items:center; color:var(--muted)}
    .meta{display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem}
    .badge{padding:.4rem .6rem; border-radius:9px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); font-size:.9rem}
    .hero-card{border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
               border-radius:var(--radius); padding:1rem; box-shadow:var(--shadow)}
    .hero-img {
  border-radius: 14px;
  overflow: hidden;
  display: inline-block; /* để vừa với ảnh */
}
.hero-img img {
  display: block;
  max-width: 100%;
  height: auto;
  border-radius: 14px;
}

    /* Section */
    section{padding:3rem 0}
    .section-head{display:flex; align-items:end; justify-content:space-between; gap:1rem; margin-bottom:1.2rem}
    h2{font-size:clamp(1.2rem, 3vw, 2rem); margin:.2rem 0}
    p.lead{color:var(--muted); margin:.3rem 0}

    /* Cards grid */
    .grid{display:grid; gap:1rem}
    .grid.cols-3{grid-template-columns: repeat(3, 1fr)}
    .grid.cols-4{grid-template-columns: repeat(4, 1fr)}
    @media (max-width: 960px){
      .hero-grid{grid-template-columns: 1fr}
      .grid.cols-3{grid-template-columns: repeat(2, 1fr)}
      .grid.cols-4{grid-template-columns: repeat(2, 1fr)}
    }
    @media (max-width: 640px){
      .grid.cols-3, .grid.cols-4{grid-template-columns: 1fr}
    }

    .card{border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
          border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .card .thumb{position:relative; aspect-ratio: 16/10; overflow:hidden}
    .thumb img{width:100%; height:100%; object-fit:cover; filter:saturate(1.05)}
    .card .body{padding:1rem; display:flex; flex-direction:column; gap:.4rem}
    .card .title{font-weight:700}
    .tags{display:flex; flex-wrap:wrap; gap:.5rem; margin-top:.3rem}

    /* Gallery slider */
    .slider{position:relative; border-radius:var(--radius); overflow:hidden; height:320px; border:1px solid rgba(255,255,255,.08)}
    .slides{display:flex; width:100%; height:100%; transition:transform .6s ease}
    .slide{flex:0 0 100%; position:relative}
    .slide img{width:100%; height:100%; object-fit:cover}
    .slider .dots{position:absolute; left:50%; bottom:12px; transform:translateX(-50%); display:flex; gap:8px}
    .dot{width:8px; height:8px; border-radius:999px; background:rgba(255,255,255,.45); border:none}
    .dot.active{background:white}

    /* Timeline */
    .timeline{position:relative; margin:1rem 0;}
    .timeline::before{content:""; position:absolute; left:12px; top:0; bottom:0; width:2px; background:linear-gradient(#38bdf8, transparent)}
    .titem{position:relative; padding-left:2.2rem; margin:1rem 0}
    .titem::before{content:""; position:absolute; left:6px; top:.15rem; width:12px; height:12px; border-radius:999px; background:radial-gradient(circle at 30% 30%, #38bdf8, #0ea5e9)}
    .titem h4{margin:.1rem 0}
    .titem p{color:var(--muted); margin:.2rem 0}

    /* Search */
    .searchbar{display:flex; gap:.6rem; align-items:center; padding:.7rem .9rem; border-radius:12px;
               background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1)}
    .searchbar input{flex:1; background:transparent; border:none; outline:none; color:var(--text); font-size:1rem}

    /* Modal */
    .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(2,6,23,.6); backdrop-filter: blur(10px); z-index:100}
    .modal.active{display:grid}
    .modal-card{width:min(780px, 92vw); border-radius:18px; background:var(--bg-soft); border:1px solid rgba(255,255,255,.1); box-shadow:var(--shadow)}
    .modal-head{display:flex; justify-content:space-between; align-items:center; padding:1rem 1.1rem; border-bottom:1px solid rgba(255,255,255,.06)}
    .modal-body{padding:1.1rem}
    .close{border:none; background:transparent; color:var(--muted); font-size:1.6rem; cursor:pointer}

    /* Footer */
    footer{padding:2rem 0; color:var(--muted); border-top:1px solid rgba(255,255,255,.08)}

    /* Small niceties */
    .glow{box-shadow: 0 0 0 0 rgba(56,189,248,.0); animation: pulse 2.8s infinite}
    @keyframes pulse{0%{box-shadow: 0 0 0 0 rgba(56,189,248,.35)} 70%{box-shadow: 0 0 0 20px rgba(56,189,248,0)} 100%{box-shadow: 0 0 0 0 rgba(56,189,248,0)}}

.btn-nami {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem; /* khoảng cách icon ↔ chữ */
  margin: 16px auto 0;   /* auto để nút luôn nằm giữa */
  padding: 0.85rem 1.6rem;
  border-radius: 40px;
  font-weight: 700;
  font-size: 1rem;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  background: linear-gradient(135deg, #f97316, #facc15, #38bdf8);
  background-size: 250% 250%;
  animation: namiGradient 6s ease infinite;
  border: 2px solid #000;   /* viền đen rõ ràng */
  box-shadow: 0 0 15px rgba(56,189,248,.45);
  text-decoration: none;
  cursor: pointer;
  transition: all .25s ease;
  width: fit-content; /* vừa với nội dung */
}

.btn-nami:hover {
  transform: translateY(-3px) scale(1.07);
  box-shadow: 0 0 25px rgba(249,115,22,.6),
              0 0 50px rgba(56,189,248,.6);
}

/* Gradient nền động */
@keyframes namiGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.card {
  display: flex;
  flex-direction: column;
}

.card .body {
  flex-grow: 1; /* chiếm hết khoảng trống phía trên */
}

.card .extra {
  margin-top: auto; /* đẩy xuống đáy card */
  padding: 10px 0;
  display: flex;
  justify-content: center;
}
.btn-nami {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  margin: 16px auto 0;
  padding: 0.9rem 1.8rem;
  border-radius: 40px;
  font-weight: 800;
  font-size: 1rem;
  color: #fff;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
  background: linear-gradient(135deg, #ff512f, #ff9a00, #facc15, #38bdf8, #7c3aed);
  background-size: 400% 400%;
  animation: namiGradient 5s ease infinite;
  border: none;
  box-shadow: 0 0 25px rgba(255,150,0,.7), 0 0 40px rgba(56,189,248,.6);
  text-decoration: none;
  cursor: pointer;
  transition: all .25s ease;
  width: fit-content;
}

.btn-nami:hover {
  transform: translateY(-4px) scale(1.08);
  box-shadow: 0 0 35px rgba(255,180,0,.9),
              0 0 60px rgba(56,189,248,.8);
}

@keyframes namiGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.btn-nami.small {
  padding: 0.55rem 1.2rem;
  font-size: 0.88rem;
  border-radius: 30px;
  font-weight: 700;
}

.btn-nami.small img {
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-wrap">
      <div class="brand">
        <div class="brand-logo" aria-hidden="true"><span>☠</span></div>
        <a href="#home" class="brand-name">N.K • One Piece</a>
      </div>
      <div class="nav-links">
        <a href="#about">Giới thiệu</a>
        <a href="#crew">Nhóm Mũ Rơm</a>
        <a href="#gallery">Bộ sưu tập</a>
        <a href="#timeline">Timeline</a>
        <a href="#blog">Blog</a>
        <a href="#contact" class="btn">Liên hệ</a>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero">
    <div class="container hero-grid">
      <div>
        <div class="kicker"><span class="chip">Fanpage cá nhân</span> <span>• Thế giới One Piece qua góc nhìn của N.K</span></div>
        <h1>Cùng khám phá về băng Mũ Rơm – một thế giới về <span style="background:linear-gradient(90deg, #38bdf8, #a78bfa); -webkit-background-clip:text; color:transparent">hải tặc</span>.</h1>
        <p class="lead">Tổng hợp nhân vật, khoảnh khắc, lý thuyết, và ghi chép hành trình chinh phục Đại Hải Trình.</p>
        <div class="meta">
          <span class="badge">⚡ Mượt mà</span>
          <span class="badge">📱 Tiện lợi</span>
          <span class="badge">🌓 Nền tối</span>
          <span class="badge">🧭 UI hiện đại</span>
        </div> 
<div style="display:flex; gap:.8rem; margin-top:1.1rem"> 
<a href="#crew" class="btn primary glow">Khám phá băng Mũ Rơm</a> 
<a href="#contact" class="btn">Kết nối với khách hàng</a> 
</div> 
</div> 
<div class="hero-card">
  <div class="hero-img" aria-label="Hero art">
    <img 
      alt="One Piece collage" 
      src="https://media1.tenor.com/m/gywEgvHO37QAAAAd/one-piece-happy.gif" 
      style="width:100%; height:auto; border-radius:1rem;"
    >
  </div>
  <div style="display:flex; gap:.6rem; margin-top:.7rem; flex-wrap:wrap">
    <span class="chip">#GrandLine</span>
    <span class="chip">#StrawHats</span>
    <span class="chip">#Haki</span>
    <span class="chip">#Theory</span>
  </div>
</div>
 </div> 
</header>

  <!-- ABOUT -->
  <section id="about">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Giới thiệu</h2>
          <p class="lead">Tôi là <strong>N.K</strong> – thích kể chuyện, sưu tầm ảnh đẹp, và soi lore One Piece theo cách gọn gàng, dễ đọc.</p>
        </div>
        <a class="btn" href="#contact">Gửi lời nhắn</a>
      </div>
      <div class="grid cols-3">
        <article class="card">
          <div class="thumb">
		  
  <img src="https://media1.tenor.com/m/BWk4_NBCmtgAAAAC/one-piece.gif" alt="Mục tiêu">
</div>
  <div class="body">
    <div class="title">Mục tiêu</div>
    <p class="lead">Mọi hải tặc đều nhắm đến kho báu One Piece và danh hiệu...</p>
    <div class="tags">
      <span class="chip">Kho Báu One Piece</span>
      <span class="chip">Vua Hải Tặc</span>
    </div>
    <a href="https://senpaingo-web.github.io/gioithieumuctieu/" class="btn-nami">
  Xem thêm
</a>
  </div>
</article>

<article class="card">
  <div class="thumb">
    <img src="https://media1.tenor.com/m/143ZiFOUsFsAAAAd/whitebeard-roger.gif" alt="Haki">
  </div>
  <div class="body">
    <div class="title">Haki</div>
    <p class="lead">Những kẻ được gọi là huyền thoại đều có sức mạnh Haki đỉnh cao.</p>
    <div class="tags">
      <span class="chip">Haki Đỉnh Cao</span>
      <span class="chip">Huyền Thoại</span>
    </div>
    <a href="https://senpaingo-web.github.io/gioithieumuctieu/" class="btn-nami">
  Xem thêm
</a>
  </div>
</article>
		
<article class="card">
  <div class="thumb">
    <img src="https://media1.tenor.com/m/UCJLb65vNLEAAAAC/nika-devil-fruit-one-piece.gif" alt="Trái Ác Quỷ">
  </div>
  <div class="body">
    <div class="title">Trái Ác Quỷ</div>
    <p class="lead">Trái Ác Quỷ mang lại sức mạnh cho người ăn, nhưng kẻ đó sẽ bị...</p>
    <div class="tags">
      <span class="chip">Trái Ác Quỷ</span>
      <span class="chip">Biển Cả Quyền Rủa</span>
    </div>
    <a href="https://senpaingo-web.github.io/gioithieumuctieu/" class="btn-nami">
  Xem thêm
</a>
  </div>
</article>
      </div>
    </div>
  </section>

  <!-- CREW -->
  <section id="crew">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Băng Mũ Rơm</h2>
          <p class="lead">Các thành viên chính của Băng Mũ Rơm (Bấm vào từng nhân vật để xem "Hồ sơ nhân vật")</p>
        </div>
        <div class="searchbar" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="1.6"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/></svg>
          <input id="search" placeholder="Tìm tên, vai trò, haki…" aria-label="Tìm kiếm nhân vật" />
        </div>
      </div>

      <div id="crewGrid" class="grid cols-4" aria-live="polite"></div>
    </div>
  </section>

<!-- OTHER CHARACTERS -->
<section id="others">
  <div class="container">
    <div class="section-head">
      <div>
        <h2>Các nhân vật khác</h2>
        <p class="lead">Những nhân vật quan trọng ngoài băng Mũ Rơm. (Bấm vào từng nhân vật để xem "Hồ sơ nhân vật")</p>
      </div>
<div class="searchbar" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="1.6"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/></svg>
          <input id="search" placeholder="Tìm tên, vai trò, haki…" aria-label="Tìm kiếm nhân vật" />
    </div>
</div>

    <div id="othersGrid" class="grid cols-4" aria-live="polite"></div>
  </div>
</section>

  <!-- GALLERY -->
<section id="gallery">
  <div class="container">
    <div class="section-head">
      <div>
        <h2>Bộ sưu tập nổi bật</h2>
        <p class="lead">Slideshow tự động chuyển.</p>
      </div>
      <a class="btn" href="#">Tải thêm sau</a>
    </div>
    <div class="slider" aria-roledescription="carousel" aria-label="Slideshow ảnh One Piece">
      <div class="slides" id="slides">
        <!-- Thay src bằng ảnh thật của bạn -->
        <div class="slide">
          <img alt="Ảnh 1" src="https://images.alphacoders.com/136/thumb-1920-1360737.png" />
        </div>
        <div class="slide">
          <img alt="Ảnh 2" src="https://i.pinimg.com/736x/5e/b5/e7/5eb5e73a1fafa8570a422d4712d3a07a.jpg" />
        </div>
        <div class="slide">
          <img alt="Ảnh 3" src="https://scontent.fsgn22-1.fna.fbcdn.net/v/t39.30808-6/475535044_1147254820101371_1724313246481124439_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeH_ww838iW2ZxwdT8hspo_Vj-HPQMH8aLOP4c9Awfxos7rcEoqNFEQL4CyO2RchrPB2MUZ_QQTaQJivV36F-SmR&_nc_ohc=Hm1jbI20eVUQ7kNvwH1SiNJ&_nc_oc=Admhh8xB0ExX8ua3IikKxCsMzpQ85LNLP393y7ESSU4SlNaMRmTN4st4OCNb3Gmi5rkK-R3ujMaoYbezNU0V7BGU&_nc_zt=23&_nc_ht=scontent.fsgn22-1.fna&_nc_gid=sDQiS2okpd4m3ptE9TXRZg&oh=00_AfUMIJlNruIYpxiwd5eztByrNDkcz_sbKUozs6fE_enmQg&oe=68A89DEE" />
        </div>
      </div>
      <div class="dots" id="dots" aria-hidden="true"></div>
    </div>
  </div>
</section>

  <!-- a -->
  <section id="timeline">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Timeline hành trình</h2>
          <p class="lead">Các cột mốc mình yêu thích.</p>
        </div>
      </div>
      <div class="timeline" id="timelineList"></div>
    </div>
  </section>

  <!-- BLOG / NOTES -->
  <section id="blog">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Blog & Ghi chú</h2>
          <p class="lead">Bài viết ngắn, cảm nhận, hoặc lý thuyết.</p>
        </div>
        <a class="btn" href="#contact">Gợi ý chủ đề?</a>
      </div>
      <div class="grid cols-3" id="postGrid"></div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Liên hệ</h2>
          <p class="lead">Bạn có góp ý hay muốn hợp tác? Cứ nhắn nhé!</p>
        </div>
      </div>
      <form class="card" onsubmit="event.preventDefault(); alert('Đã nhận được email của bạn, tôi sẽ liên hệ bạn sau.')" aria-label="Form liên hệ">
        <div class="body" style="gap:.8rem">
          <label>Họ tên<br><input required placeholder="Tên của bạn" style="width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text)"></label>
          <label>Email<br><input required type="email" placeholder="you@example.com" style="width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text)"></label>
          <label>Nội dung<br><textarea required rows="4" placeholder="Mình muốn góp ý…" style="width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text)"></textarea></label>
          <div style="display:flex; gap:.6rem; align-items:center; justify-content:space-between">
            <label style="display:flex; align-items:center; gap:.5rem; color:var(--muted)"><input type="checkbox" required> Đồng ý chính sách riêng tư</label>
            <button class="btn primary" type="submit">Gửi</button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1rem">
      <div>© <span id="year"></span> • N.K • 52 Phan Văn Mảng, KP 7, TP. Tân An, tirh Long An, Thị Trấn Bến Lức.<p>• Email: Senpaingo@gmail.com<p>• SĐT: 0867062472</div>
      <div style="display:flex; gap:.6rem; align-items:center">
        <a class="chip" href="#home">Lên đầu trang</a>
        <a class="chip" href="#about">Giới thiệu</a>
      </div>
    </div>
  </footer>

  <!-- MODAL -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="modal-head">
        <strong id="modalTitle">Hồ sơ nhân vật</strong>
        <button class="close" aria-label="Đóng" onclick="toggleModal(false)">✕</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

<script type="module">
  // Import Firebase SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getDatabase, ref, get, update, onValue } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

  // Cấu hình Firebase (thay bằng của bạn)
  const firebaseConfig = {
  apiKey: "AIzaSyCjj7mgcn-l9dBcm5s4C5SN1OfrBsL0ozU",
  authDomain: "nk201203-620de.firebaseapp.com",
  databaseURL: "https://nk201203-620de-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "nk201203-620de",
  storageBucket: "nk201203-620de.firebasestorage.app",
  messagingSenderId: "143532095711",
  appId: "1:143532095711:web:e616c3939b96fa22fa116a",
  measurementId: "G-KESCSMWNZ4"
};

  // Khởi tạo
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Hàm Like
window.likeCharacter = function(type, i) {
  const id = type + "_" + i;

  // Nếu đã like rồi thì không cho like nữa
  if (localStorage.getItem("liked_" + id)) {
    alert("Bạn đã like nhân vật này rồi!");
    return;
  }

  const refPath = ref(db, "likes/" + id);

  get(refPath).then(snapshot => {
    let current = snapshot.exists() ? snapshot.val() : 0;
    update(ref(db, "likes"), { [id]: current + 1 }).then(() => {
      // Đánh dấu đã like trong localStorage
      localStorage.setItem("liked_" + id, "true");
    });
  });
}

  // Load like từ Firebase và hiển thị
  function loadLikes() {
    const refPath = ref(db, "likes");
    onValue(refPath, snapshot => {
      const data = snapshot.val() || {};
      crew.forEach((c, i) => c.likes = data["crew_" + i] || 0);
      others.forEach((c, i) => c.likes = data["others_" + i] || 0);
      renderCrew(crew);
      renderOthers(others);
    });
  }

  loadLikes();
</script>
<script>
  // ======= DATA (có ảnh chuẩn) =======
  const crew = [
    { name: 'Monkey D. Luffy', role: 'Thuyền trưởng', bounty: '3,000,000,000', haki: ['Haki Vũ Trang','Haki Quan Sát','Haki Bá Vương'], fruit: 'Hito Hito no Mi, Model: Thần Mặt Trời Nika', img: 'https://media1.tenor.com/m/NAWlmrx6dzwAAAAd/gum-gum-white-star-gun-white-star-gun.gif', quote: 'Ta là Monkey D. Luffy, và ta sẽ trở thành Vua Hải Tặc!<br><br>Bị Hải Quân giết, hay đi theo tôi. Anh chọn cái nào? (Lúc giải cứu Zoro)<br><br>Arlong là... Thằng nào?<br><br>Tui muốn ăn thịt!!<br><br>Anh hùng ư? Không! Bọn tớ là hải tặc! Tôi thích anh hùng, nhưng tớ không muốn làm anh hùng! Cậu có biết anh hùng là gì không? Giả sử có một miếng thịt… anh hùng sẽ chia nó cho mọi người. Còn hải tặc sẽ mở tiệc và ăn hết! Tớ thì muốn ăn hết thịt cơ!! (Nói với Vivi)<br><br>Dừng lại!!! Tôi không muốn nghe!!! Nếu phải đi một chuyến phiêu lưu nhàm chán như vậy, thì tôi thà bỏ làm hải tặc luôn! Tôi không muốn biết kho báu ở đâu, hay thậm chí nó có tồn tại hay không!!! Tôi sẽ tự mình tìm ra nó!!! Đó mới là ý nghĩa của việc trở thành Vua Hải Tặc!!! (Nói với Usopp và Robin)<br><br>Tôi không muốn chinh phục bất cứ thứ gì. Tôi chỉ nghĩ rằng kẻ tự do nhất trên biển cả này… chính là Vua Hải Tặc!<br><br>Sớm thôi, tôi sẽ trở thành Vua Hải Tặc!<br><br>Đừng hòng làm hoa tiêu của ta phải rơi nước mắt!!' },
    { name: 'Roronoa Zoro', role: 'Kiếm sĩ', bounty: '1,111,000,000', haki: ['Haki Vũ trang','Haki Quan sát', 'Haki Bá Vương (Được Gaban xác nhận)'], fruit: null, img: 'https://media1.tenor.com/m/kCFWuun7w-MAAAAd/zoro-vs-king-zoro.gif', quote: 'Được rồi! Thà làm hải tặc còn hơn chết ở đây!<br><br>Nếu ngươi làm bất cứ điều gì khiến ta phải từ bỏ tham vọng… thì mạng sống của ngươi sẽ kết thúc trên lưỡi kiếm của ta!<br><br>Tôi sẽ không bao giờ thua nữa, có ý kiến gì không Vua Hải Tặc tương lai?!<br><br>Nếu ta còn không thể bảo vệ giấc mơ của thuyền trưởng mình, thì bất cứ tham vọng nào của ta cũng chỉ là lời nói suông…<br><br>Ta sẽ trở thành kiếm sĩ vĩ đại nhất thế giới! Những gì còn lại với ta chỉ là định mệnh! Danh tiếng của ta có thể tai tiếng… nhưng nó sẽ làm cả thế giới phải chấn động!!!<br><br>Vậy thì sao nhỉ. ‘May mắn’ của ta đối đầu với ‘lời nguyền’ của thanh kiếm này. Muốn xem cái nào mạnh hơn không..? Nếu ta thua, thì ta cũng chỉ là một người đàn ông bình thường. (Zoro thử thanh Sandai Kitetsu)<br><br>Đây là hải tặc chứ không phải là trò chơi con nít!<br><br>Để giúp Luffy trở thành Vua Hải Tặc, ta sẽ trở thành King Of Hell (Vua Địa Ngục)' },
    { name: 'Nami', role: 'Hoa tiêu', bounty: '366,000,000', haki: [], fruit: null, img: 'https://media1.tenor.com/m/4Y9tMDtTUvIAAAAd/one-piece-stampede.gif', quote: 'Tại sao? Đây là công việc mà Hải quân các người làm sao? Các người có biết Arlong đã giết hại bao nhiêu người và phá hủy bao nhiêu ngôi làng rồi không?! Dưới sự thống trị của hắn, tất cả mọi người đều bị đối xử như nô lệ! Vậy mà các người chẳng làm gì cả!! Và bây giờ các người chỉ muốn tìm kho báu của một tên trộm thôi sao? Đây là bộ mặt thật của chính phủ à?!<br><br>Đừng có mà chạm đôi bàn tay bẩn thiểu đó vào vườn cam của Bellemere-san<br><br>Luffy, giúp tôi với...<br><br>Nếu anh nghĩ tôi chỉ là một cô gái dễ thương bình thường thì anh nhầm to rồi đấy!<br><br>Ước mơ của tôi là vẽ bản đồ toàn thế giới!<br><br>Cuộc đời giống như một cây bút chì, chắc chắn sẽ mòn đi, nhưng sẽ để lại những nét chữ tuyệt đẹp của cuộc sống.<br><br>Luffy chắc chắn sẽ trở thành Vua Hải Tặc!' },
    { name: 'Usopp', role: 'Xạ thủ', bounty: '500,000,000', haki: ['Haki Quan sát'], fruit: null, img: 'https://media1.tenor.com/m/qohEC4YAUyAAAAAC/one-piece-sugar.gif', quote: 'Sẽ có lúc một người đàn ông phải đứng lên và chiến đấu! Đó chính là khi ước mơ của bạn mình bị đem ra cười nhạo. Luffy sẽ không chết đâu... Ta biết chắc cậu ấy sẽ trở thành Vua Hải Tặc một ngày nào đó... và ta sẽ không để bất cứ ai cười nhạo điều đó!<br><br>Tôi sẽ trở thành chiến binh dũng cảm nhất biển cả!<br><br>Ta là Vua Xạ Thủ, Sogeking.<br><br>Tôi không quan tâm nếu trông thật thảm hại! Tôi sống sót, đó là những gì tôi làm! Và đó là lý do tôi ở đây!' },
    { name: 'Sanji', role: 'Đầu bếp', bounty: '1,032,000,000', haki: ['Haki Vũ trang','Haki Quan sát'], fruit: null, img: 'https://media1.tenor.com/m/Q-8_BLg-Zq8AAAAC/one-piece-sanji.gif', quote: 'Tôi sẽ làm những việc cậu không thể làm và cậu sẽ làm những thứ tôi không làm được.' },
    { name: 'Tony Tony Chopper', role: 'Bác sĩ', bounty: '1,000', haki: [], fruit: 'Hito Hito no Mi', img: 'https://media1.tenor.com/m/-uumzerEK8EAAAAd/egghead-one-piece.gif', quote: '<p>Trước kia, lý do em muốn trở thành con người là vì muốn có bạn.<br><br>Giờ thì để giúp được anh Luffy và mọi người em sẽ trở thành một con quái<br><br>À nè, kẹo bông ngon lắm luôn cậu nên thử :3</p>' },
    { name: 'Nico Robin', role: 'Nhà khảo cổ', bounty: '930,000,000', haki: [], fruit: 'Hana Hana no Mi', img: 'https://media1.tenor.com/m/2vWJVIz0aYkAAAAC/demon-demon-nico-robin.gif', quote: '<p>TÔI MUỐN ĐƯỢC SỐNG.<br><br>Vì đồng đội, ta sẽ trở thành một con quỷ!<br><br>Con muốn ông khen con vì đã sống được tới giờ, ông Saul!</p>' },
    { name: 'Franky', role: 'Thợ đóng tàu', bounty: '394,000,000', haki: [], fruit: null, img: 'https://media1.tenor.com/m/mB3YB5lkCdIAAAAd/franky-franky-one-piece.gif', quote: '<p>SUUUUUPERRRRR!!<br><br>Tôi cũng muốn… một ngày nào đó tự tay đóng nên một con tàu trong mơ. Một con tàu hiên ngang, kiêu hãnh lao đi giữa cả những con sóng chưa ai từng chạm đến, ở tận cùng rìa thế giới! Một con tàu như thế… mới xứng đáng với giấc mơ của tôi!</p>' },
    { name: 'Brook', role: 'Nhạc công', bounty: '383,000,000', haki: ['Haki Quan sát'], fruit: 'Yomi Yomi no Mi', img: 'https://media.tenor.com/fv_dCA838MgAAAAM/brook-soul-king.gif', quote: 'Yohohoho~<br><br>Tôi có thể xem panties của quý cô được không?<br><br>Cái chết không bao giờ là một lời xin lỗi.<br><br>Ngươi thì biết gì về cái chết chứ?! Ngươi đã từng chết bao giờ chưa?! Ngươi nghĩ cái chết sẽ vĩnh viễn duy trì lý tưởng của mình sao?! Thật nực cười! Cái chết chẳng để lại gì cả!! Khi một con người đã ra đi, thứ còn sót lại chỉ là những bộ xương khô! Nếu có một điều ta căm ghét nhất… thì đó chính là kẻ không biết tôn trọng sự sống!<br><br>Thứ giữ ta sống trên đời này… không phải là nội tạng, cũng chẳng phải là cơ bắp — mà chính là linh hồn của ta!<br><br>Quý cô đây sẽ để tôi xem  panties chứ?<br><br>Cô đơn đã không còn nằm trong từ điển của tôi nữa.<br><br>Tôi chính là gã tóc xù này!<br><br>Một người vì tất cả, tất cả vì một người! Có những lúc một người đàn ông không còn lựa chọn nào khác ngoài hành động!<br><br>Không biết nhìn panties của tiên cá có vui không nhỉ.' },
    { name: 'Jinbe', role: 'Tay lái/Chiến binh cá mập', bounty: '1,100,000,000', haki: ['Haki Vũ trang','Haki Quan sát'], fruit: null, img: 'https://media1.tenor.com/m/avDO-bs-b34AAAAd/jinbe-jimbei.gif', quote: 'Không đời nào một người định gia nhập băng của Vua Hải Tặc tương lai lại run sợ trước một Tứ Hoàng tầm thường! (Jinbe vs Bigmom)<br><br>Có thể bây giờ mọi thứ thật khó khăn, Luffy… nhưng cậu phải dập tắt những suy nghĩ ấy!! Những gì đã mất, thì đã mất rồi!! Vậy nên hãy tự hỏi bản thân điều này!! Những ai… vẫn còn ở lại với cậu?!!' }
  ];

  const others = [
    { name: 'Boa Hancock', role: 'Cựu Thất Vũ Hải<br><br>Nữ hoàng hải tặc', bounty: '1,659,000,000', haki: ['Haki Vũ trang','Haki Quan sát','Haki Bá Vương'], fruit: 'Mero Mero no Mi', img: 'https://media1.tenor.com/m/cPeAsi9pPGsAAAAd/one-piece-boa-hancock.gif', quote: 'Ta sẽ làm mê hoặc từng người trong số các ngươi.<br><br>Ta muốn cưới Luffy...<br><br>Bỏ bàn tay bẩn thỉu đó ra khỏi người ta!<br><br>Rayleigh.<br><br>Dù ta có làm gì đi nữa, tất cả mọi việc ta làm đều sẽ được tha thứ… vì ta quá đẹp!<br><br>Luffy không giống bất kỳ ai khác… vì vậy ta mới yêu anh ấy.' },
    { name: 'Bartholomew Kuma', role: '<p>Cựu Thất Vũ Hải.<br><br>Cha của Jewelry Bonney.<br><br>Thành viên Quân Cách Mạng (bí mật).<br><br>Cựu quốc vương Sorbet.</p>', bounty: '296,000,000', haki: ['Haki Vũ Trang'], fruit: 'Nikyu Nikyu no Mi', img: 'https://media1.tenor.com/m/0lGk09e-pWgAAAAd/kuma-saturn.gif', quote: 'Nếu ngươi chịu được nó, ta sẽ để các ngươi sống (Kuma vs Zoro)<br><br>Ta sẽ bảo vệ con tàu này đến ngày chúng quay lại.<br><br>Nếu người ta sinh ra đã định sẵn đời nô lệ... Thì còn ra đời làm gì nữa? (Kuma vs Saturn)<br><br>Em hãy an giấc nhé Ginny... Anh hứa... sẽ nuôi con lớn khôn<br><br>Vị thánh ư? Tôi chỉ là... Một Paci-Fista (Người yêu hòa bình) bé nhỏ mà thôi (Kuma vs Vegapunk).<br><br>Tôi sẽ đón nhận bất kỳ số mệnh nào... Miễn là Bonney được cứu chữa!<br><br>Thằng nhỏ ra tay để bảo vệ cho một người cá! Luffy Mũ Rơm... Chưa từng có kẻ nào dám ra tay dứt khoát như thế... Suốt hàng trăm năm nay! Đó là phản loạn!!<br><br>Con nhầm rồi...!! Ta chỉ cho con thấy được đẳng cấp sức mạnh con cần phải có được ở tân thế giới mà thôi. Con và những người bạn con còn chưa sẵn sàng đâu. Đừng vội đi vào đó... Nhé... Một ngày nào đó các con sẽ... cứu lấy thế giới này!!<br><br>Tôi không thể nói mình biết ơn bao nhiêu cho đủ... Cảm ơn ông vì đã cứu Bonney!! Nếu ông gặp lại con bé... Xin nhờ ông... Nói giùm với nó một câu này nha!<br><br>Chúc mừng sinh nhật 10 tuổi của con, Bonney!!' },
    { name: 'Marshall D. Teach', role: 'Tứ Hoàng<br><br>Thuyền Trưởng Băng Hải Tặc Râu Đen<br><br>Vua của Đảo Hachinosu (Đảo Hải Tặc)', bounty: '3,996,000,000', haki: ['Haki Vũ trang','Haki Quan sát'], fruit: 'Yami Yami no Mi & Gura Gura no Mi', img: 'https://media1.tenor.com/m/EbfVBFAoR40AAAAd/blackbeard-trafalgar-law.gif', quote: 'Định mệnh đã chọn ta để chinh phục thế giới này! Zehahaha!<br><br>Ước mơ của con người… là vô tận.<br><br>Trông ngươi càng ngày càng đẹp trai rồi đấy, Tóc Đỏ nhỉ? Vết sẹo kia trông thật hợp với ngươi lắm.<br><br>Một Bàn Tay Bóng Tối để triệu hồi Hư Vô. Một Bàn Tay Ánh Sáng để rung chuyển bầu trời và uốn cong mặt đất.<br><br>Với Big Mom và Kaido ngã xuống, cả thế giới này sẽ đảo lộn hết! Nghe thú vị nhỉ, Zehahaha!' },
    { name: 'Shanks', role: 'Tứ Hoàng<br><br>Thuyền trưởng băng hải tặc Tóc Đỏ', bounty: '4,048,900,000', haki: ['Haki Vũ trang','Haki Quan sát','Haki Bá Vương'], fruit: null, img: 'https://media1.tenor.com/m/bhgt_h4KFBwAAAAd/shanks-v-kid.gif', quote: 'Chiếc mũ này, ta gửi lại cho cháu giữ.<br><br>Bọn ta là hải tặc! Chẳng sống theo luật lệ nào hết!<br><br>Có lý do hay không, ta tuyệt đối không cho phép kẻ nào làm hại bạn ta!<br><br>Cánh tay này… ta đặt cược cho một thời đại mới.<br><br>Ta đến đây để kết thúc cuộc chiến này!<br><br>Nếu ta cứ để yên như vậy, niềm tin của mọi người dành cho ta sẽ mất đi.<br><br>Thời đại mới khiến ngươi khiếp sợ đến thế sao?<br><br>Đồng minh của chúng ta thì nổi tiếng là yếu rồi mà.<br><br>Divine Departure.' },
	{ name: 'Trafalgar D. Water Law', role: 'Thuyền trưởng băng hải tặc Heart.<br><br>Bác sĩ tử thần.<br><br>Cựu Thất Vũ Hải.', bounty: '3,000,000,000', haki: ['Haki Vũ trang','Haki Quan sát'], fruit: 'Ope Ope no Mi', img: 'https://media1.tenor.com/m/daKqL0QViqkAAAAd/law-trafalgar-law.gif', quote: '' },
	{ name: 'Yamato', role: 'Con trai Kaido.<br><br>Tự nhận là "Kozuki Oden".', bounty: 'Không Bị Truy Nã.', haki: ['Haki Vũ trang','Haki Quan sát','Haki Bá Vương'], fruit: 'Inu Inu no Mi, Model: Okuchi-no-Makami', img: 'https://media1.tenor.com/m/HRTpaJxKLFoAAAAd/one-piece-clash.gif', quote: '' },
  ];

const othersGrid = document.getElementById('othersGrid');
  function renderOthers(list){
    othersGrid.innerHTML = list.map((c,i)=>`
      <article class="card" tabindex="0" role="button" 
        onclick="openProfileOthers(${i})" 
        onkeypress="if(event.key==='Enter')openProfileOthers(${i})">
        <div class="thumb">${c.img?`<img alt="${c.name}" src="${c.img}" loading="lazy">`:''}</div>
        <div class="body">
          <div class="title">${c.name}</div>
          <div class="lead" style="color:var(--muted)">${c.role}</div>
          <div class="tags">
            ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
            ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
            <span class='chip'>💰 ${c.bounty}</span>
          </div>
<div class="like-btn" onclick="event.stopPropagation();likeCharacter('others', ${i})">
  ❤️ ${c.likes || 0}
</div>
        </div>
      </article>
    `).join('');
  }
  renderOthers(others);

  function openProfileOthers(i){
    const c = others[i];
    const body = `
      <div style="display:grid; grid-template-columns: 1fr 1.2fr; gap:1rem; align-items:start">
        <div>
          <div class="thumb" style="border-radius:14px; overflow:hidden">${c.img?`<img alt="${c.name}" src="${c.img}">`:''}</div>
        </div>
        <div>
          <h3 id="modalTitle" style="margin:.2rem 0">${c.name}</h3>
          <p style="color:var(--muted); margin:.2rem 0">${c.role}</p>
          <div class="tags" style="margin:.4rem 0">
            ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
            ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
            <span class='chip'>💰 ${c.bounty}</span>
          </div>
          <blockquote style="margin:.8rem 0; color:#e2e8f0; border-left:3px solid rgba(56,189,248,.45); padding-left:.8rem">“${c.quote||''}”</blockquote>
        </div>
      </div>`;
    document.getElementById('modalBody').innerHTML = body;
    toggleModal(true);
  }

  const timeline = [
    { year: 'East Blue', title: 'Khởi hành', text: 'Gặp từng thành viên, đặt nền móng cho giấc mơ.' },
    { year: 'Alabasta', title: 'Bảo vệ vương quốc', text: 'Hành trình cứu Vivi và đối đầu Crocodile.' },
    { year: 'Enies Lobby', title: 'Gõ cửa công lý', text: '“Tôi muốn sống!” – cột mốc cảm xúc.' },
    { year: 'Marineford', title: 'Chiến trường đỉnh cao', text: 'Bi kịch và cú hích trưởng thành.' },
    { year: 'Wano', title: 'Khai mở thời đại mới', text: 'Liên minh, Haki và giấc mơ gần hơn.' },
  ];

  const posts = [
     { 
    title: 'Haki Bá Vương – bản chất là gì?', 
    excerpt: 'Đỉnh cao sức mạnh của Haki Bá Vương khủng khiếp tới mức nào?', 
    date: '2025-08-01',
    img: 'https://media1.tenor.com/m/wwXI9XpRKLoAAAAd/one-piece-one-piece-stampede.gif'
  },
  { 
    title: 'Cuộc đời của Bartholomew Kuma.', 
    excerpt: 'Phân tích cuộc đời của người anh hùng trong thế giới One Piece.', 
    date: '2025-07-18',
    img: 'https://media1.tenor.com/m/l7jZAMFlNlwAAAAC/one-piece-kuma.gif'
  },
  { 
    title: 'Tiềm năng sức mạnh của Gear 5', 
    excerpt: 'Sức mạnh trí tưởng tượng của Luffy kinh khủng tới đâu?', 
    date: '2025-06-30',
    img: 'https://media1.tenor.com/m/O7t28Xrtf5YAAAAd/one-piece-gear-5.gif'
  },
];

    // ======= RUNTIME =======
    const $ = (s, root=document) => root.querySelector(s);
    const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));

    // Render crew cards
    function renderCrew(list){
  crewGrid.innerHTML = list.map((c,i)=>`
    <article class="card" tabindex="0" role="button"
      onclick="openProfile(${i})" 
      onkeypress="if(event.key==='Enter')openProfile(${i})">
      
      <div class="thumb">
        ${c.img?`<img alt="${c.name}" src="${c.img}" loading="lazy">`:''}
      </div>
      
      <div class="body">
        <div class="title">${c.name}</div>
        <div class="lead" style="color:var(--muted)">${c.role}</div>
        <div class="tags">
          ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
          ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
          <span class='chip'>💰 ${c.bounty}</span>
        </div>
      </div>

      <!-- Like luôn nằm cuối card -->
      <div class="like-btn" onclick="event.stopPropagation();likeCharacter('crew', ${i})">
        ❤️ ${c.likes || 0}
      </div>

      ${c.name === "Nami" ? `
  <div class="extra">
    <a href="https://senpaingo-web.github.io/namihsnv/" class="btn-nami small">
      Xem thêm
    </a>
  </div>
` : ''}

    </article>
  `).join('');
}

    // Search
    const search = $('#search');
    search.addEventListener('input', e=>{
      const q = e.target.value.toLowerCase().trim();
      const filtered = crew.filter(c=>
        c.name.toLowerCase().includes(q) ||
        c.role.toLowerCase().includes(q) ||
        (c.fruit||'').toLowerCase().includes(q) ||
        (c.haki||[]).join(' ').toLowerCase().includes(q)
      );
      renderCrew(filtered);
    });

    // Modal profile
    const modal = $('#modal');
    function openProfile(i){
      const c = (search.value? crew.filter(x=> x.name.toLowerCase().includes(search.value.toLowerCase()) || x.role.toLowerCase().includes(search.value.toLowerCase()) || (x.fruit||'').toLowerCase().includes(search.value.toLowerCase()) || (x.haki||[]).join(' ').toLowerCase().includes(search.value.toLowerCase())) : crew)[i];
      const body = `
        <div style="display:grid; grid-template-columns: 1fr 1.2fr; gap:1rem; align-items:start">
          <div>
            <div class="thumb" style="border-radius:14px; overflow:hidden">${c.img?`<img alt="${c.name}" src="${c.img}">`:''}</div>
          </div>
          <div>
            <h3 id="modalTitle" style="margin:.2rem 0">${c.name}</h3>
            <p style="color:var(--muted); margin:.2rem 0">${c.role}</p>
            <div class="tags" style="margin:.4rem 0">
              ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
              ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
              <span class='chip'>💰 ${c.bounty}</span>
            </div>
            <blockquote style="margin:.8rem 0; color:#e2e8f0; border-left:3px solid rgba(56,189,248,.45); padding-left:.8rem">“${c.quote||''}”</blockquote>
          </div>
        </div>`;
      $('#modalBody').innerHTML = body;
      toggleModal(true);
    }
    function toggleModal(show){ modal.classList.toggle('active', !!show); }
    modal.addEventListener('click', e=>{ if(e.target===modal) toggleModal(false); });

function likeCharacter(type, i){
  if(type === 'crew'){
    crew[i].likes = (crew[i].likes || 0) + 1;
    renderCrew(crew);
  } else {
    others[i].likes = (others[i].likes || 0) + 1;
    renderOthers(others);
  }
}

    // Slider
    const slides = $('#slides');
    const dotsWrap = $('#dots');
    let idx = 0; let N = $$('.slide', slides).length;
    function renderDots(){ dotsWrap.innerHTML = Array.from({length:N}, (_,i)=>`<button class='dot ${i===idx?'active':''}' aria-label='Tới ảnh ${i+1}' onclick='go(${i})'></button>`).join(''); }
    function go(i){ idx = (i+N)%N; slides.style.transform = `translateX(-${idx*100}%)`; renderDots(); }
    setInterval(()=> go(idx+1), 5000);

    // Timeline
    const tlist = $('#timelineList');
    tlist.innerHTML = timeline.map(t=>`<div class='titem'><div class='chip'>${t.year}</div><h4>${t.title}</h4><p>${t.text}</p></div>`).join('');

    // Posts
    const pgrid = $('#postGrid');
pgrid.innerHTML = posts.map(p=>`
  <article class='card'>
    <div class='thumb'>
      ${p.img ? `<img src="${p.img}" alt="${p.title}" loading="lazy">` : ''}
    </div>
    <div class='body'>
      <div class='title'>${p.title}</div>
      <p class='lead'>${p.excerpt}</p>
      <div class='tags'>
        <span class='chip'>${new Date(p.date).toLocaleDateString('vi-VN')}</span>
      </div>
    </div>
  </article>
`).join('');
    // Init
    renderCrew(crew);
    renderDots();
    go(0);
    $('#year').textContent = new Date().getFullYear();

// Mảng trạng thái like cho từng nhóm
let likedCrew = [];
let likedOthers = [];
</script>
</body>
</html>






