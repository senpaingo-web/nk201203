<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>One Piece • Trang cá nhân của N.K</title>
  <meta name="description" content="Trang cá nhân về One Piece: hồ sơ băng Mũ Rơm, timeline, bộ sưu tập, blog và liên hệ." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b1220;             /* nền tối sâu */
      --bg-soft: #0f172a;         /* block */
      --card: #0b132b;            /* card */
      --elev: rgba(255,255,255,.06);
      --text: #e5e7eb;
      --muted: #94a3b8;
      --brand: #38bdf8;          /* cyan */
      --brand-2: #a78bfa;        /* violet */
      --ok: #10b981;             /* green */
      --warn: #f59e0b;           /* amber */
      --danger: #ef4444;         /* red */
      --radius: 18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
.card {
  position: relative; /* để định vị tuyệt đối con */
}

.like-btn {
  margin-top:.6rem;
  cursor:pointer;
  user-select:none;
  font-weight:600;
  color:#f87171;
  position: absolute;
  bottom: 10px;
  right: 12px;
  margin-top: 0; /* bỏ margin cũ */
}
.like-btn:hover { transform:scale(1.05); }
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text); background: radial-gradient(1200px 600px at 80% -10%, rgba(56,189,248,.18), transparent 60%),
                         radial-gradient(800px 400px at -10% 10%, rgba(167,139,250,.20), transparent 60%),
                         var(--bg);
    }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    .container{width:min(1100px, 92vw); margin-inline:auto}
    .btn{display:inline-flex; align-items:center; gap:.6rem; border:1px solid rgba(255,255,255,.12);
         padding:.9rem 1.1rem; border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
         box-shadow:var(--shadow); color:var(--text); font-weight:600; transition:.2s transform, .2s background, .2s border-color}
    .btn:hover{transform:translateY(-1px); border-color:rgba(56,189,248,.35)}
    .btn.primary{background:linear-gradient(180deg, rgba(56,189,248,.35), rgba(56,189,248,.12)); border-color: rgba(56,189,248,.45)}
    .chip{font-size:.8rem; padding:.35rem .65rem; border-radius:999px; background:rgba(56,189,248,.18); border:1px solid rgba(56,189,248,.35); color:#cffafe}

    /* Navbar */
    .nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(10px); background:rgba(10,15,26,.65);
         border-bottom:1px solid rgba(255,255,255,.06)}
    .nav-wrap{display:flex; align-items:center; justify-content:space-between; padding:.8rem 0}
    .brand{display:flex; align-items:center; gap:.7rem; font-weight:900; letter-spacing:.3px}
    .brand-logo{width:34px; height:34px; border-radius:10px; background:radial-gradient(circle at 30% 30%, #fde047, #f97316 55%);
                display:grid; place-items:center; box-shadow: 0 6px 20px rgba(253, 224, 71, .25)}
    .brand-logo span{font-weight:900; color:#0b1220}
    .nav-links{display:flex; gap:1rem; align-items:center}
    .nav-links a{opacity:.9; padding:.55rem .8rem; border-radius:12px}
    .nav-links a:hover{background:rgba(255,255,255,.06)}

    /* Hero */
    .hero{padding:clamp(3rem, 6vw, 6rem) 0 3rem}
    .hero-grid{display:grid; grid-template-columns: 1.2fr .8fr; gap:2rem; align-items:center}
    .hero h1{font-size:clamp(2rem, 5vw, 3.4rem); margin:0 0 .8rem; line-height:1.05}
    .kicker{display:flex; gap:.6rem; align-items:center; color:var(--muted)}
    .meta{display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem}
    .badge{padding:.4rem .6rem; border-radius:9px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); font-size:.9rem}
    .hero-card{border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
               border-radius:var(--radius); padding:1rem; box-shadow:var(--shadow)}
    .hero-img{aspect-ratio:4/3; border-radius:14px; background:linear-gradient(135deg, rgba(56,189,248,.25), rgba(167,139,250,.25));
              position:relative; overflow:hidden}
    .hero-img::after{content:""; position:absolute; inset:0; background-image:url(''); background-size:cover; background-position:center; opacity:.18;}

    /* Section */
    section{padding:3rem 0}
    .section-head{display:flex; align-items:end; justify-content:space-between; gap:1rem; margin-bottom:1.2rem}
    h2{font-size:clamp(1.2rem, 3vw, 2rem); margin:.2rem 0}
    p.lead{color:var(--muted); margin:.3rem 0}

    /* Cards grid */
    .grid{display:grid; gap:1rem}
    .grid.cols-3{grid-template-columns: repeat(3, 1fr)}
    .grid.cols-4{grid-template-columns: repeat(4, 1fr)}
    @media (max-width: 960px){
      .hero-grid{grid-template-columns: 1fr}
      .grid.cols-3{grid-template-columns: repeat(2, 1fr)}
      .grid.cols-4{grid-template-columns: repeat(2, 1fr)}
    }
    @media (max-width: 640px){
      .grid.cols-3, .grid.cols-4{grid-template-columns: 1fr}
    }

    .card{border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
          border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .card .thumb{position:relative; aspect-ratio: 16/10; overflow:hidden}
    .thumb img{width:100%; height:100%; object-fit:cover; filter:saturate(1.05)}
    .card .body{padding:1rem; display:flex; flex-direction:column; gap:.4rem}
    .card .title{font-weight:700}
    .tags{display:flex; flex-wrap:wrap; gap:.5rem; margin-top:.3rem}

    /* Gallery slider */
    .slider{position:relative; border-radius:var(--radius); overflow:hidden; height:320px; border:1px solid rgba(255,255,255,.08)}
    .slides{display:flex; width:100%; height:100%; transition:transform .6s ease}
    .slide{flex:0 0 100%; position:relative}
    .slide img{width:100%; height:100%; object-fit:cover}
    .slider .dots{position:absolute; left:50%; bottom:12px; transform:translateX(-50%); display:flex; gap:8px}
    .dot{width:8px; height:8px; border-radius:999px; background:rgba(255,255,255,.45); border:none}
    .dot.active{background:white}

    /* Timeline */
    .timeline{position:relative; margin:1rem 0;}
    .timeline::before{content:""; position:absolute; left:12px; top:0; bottom:0; width:2px; background:linear-gradient(#38bdf8, transparent)}
    .titem{position:relative; padding-left:2.2rem; margin:1rem 0}
    .titem::before{content:""; position:absolute; left:6px; top:.15rem; width:12px; height:12px; border-radius:999px; background:radial-gradient(circle at 30% 30%, #38bdf8, #0ea5e9)}
    .titem h4{margin:.1rem 0}
    .titem p{color:var(--muted); margin:.2rem 0}

    /* Search */
    .searchbar{display:flex; gap:.6rem; align-items:center; padding:.7rem .9rem; border-radius:12px;
               background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1)}
    .searchbar input{flex:1; background:transparent; border:none; outline:none; color:var(--text); font-size:1rem}

    /* Modal */
    .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(2,6,23,.6); backdrop-filter: blur(10px); z-index:100}
    .modal.active{display:grid}
    .modal-card{width:min(780px, 92vw); border-radius:18px; background:var(--bg-soft); border:1px solid rgba(255,255,255,.1); box-shadow:var(--shadow)}
    .modal-head{display:flex; justify-content:space-between; align-items:center; padding:1rem 1.1rem; border-bottom:1px solid rgba(255,255,255,.06)}
    .modal-body{padding:1.1rem}
    .close{border:none; background:transparent; color:var(--muted); font-size:1.6rem; cursor:pointer}

    /* Footer */
    footer{padding:2rem 0; color:var(--muted); border-top:1px solid rgba(255,255,255,.08)}

    /* Small niceties */
    .glow{box-shadow: 0 0 0 0 rgba(56,189,248,.0); animation: pulse 2.8s infinite}
    @keyframes pulse{0%{box-shadow: 0 0 0 0 rgba(56,189,248,.35)} 70%{box-shadow: 0 0 0 20px rgba(56,189,248,0)} 100%{box-shadow: 0 0 0 0 rgba(56,189,248,0)}}
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-wrap">
      <div class="brand">
        <div class="brand-logo" aria-hidden="true"><span>☠</span></div>
        <a href="#home" class="brand-name">K • One Piece</a>
      </div>
      <div class="nav-links">
        <a href="#about">Giới thiệu</a>
        <a href="#crew">Mũ Rơm</a>
        <a href="#gallery">Bộ sưu tập</a>
        <a href="#timeline">Timeline</a>
        <a href="#blog">Blog</a>
        <a href="#contact" class="btn">Liên hệ</a>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero">
    <div class="container hero-grid">
      <div>
        <div class="kicker"><span class="chip">Fanpage cá nhân</span> <span>• Thế giới One Piece qua góc nhìn của N.K</span></div>
        <h1>Cùng khám phá về băng Mũ Rơm – một thế giới về <span style="background:linear-gradient(90deg, #38bdf8, #a78bfa); -webkit-background-clip:text; color:transparent">hải tặc</span>.</h1>
        <p class="lead">Tổng hợp nhân vật, khoảnh khắc, lý thuyết, và ghi chép hành trình chinh phục Đại Hải Trình. Tối ưu cho di động, nhanh, gọn, đẹp, và cực kỳ dễ chỉnh sửa.</p>
        <div class="meta">
          <span class="badge">⚡ Mượt mà</span>
          <span class="badge">📱 Responsive</span>
          <span class="badge">🌓 Dark-first</span>
          <span class="badge">🧭 UI hiện đại</span>
        </div> 
<div style="display:flex; gap:.8rem; margin-top:1.1rem"> 
<a href="#crew" class="btn primary glow">Khám phá băng Mũ Rơm</a> 
<a href="#contact" class="btn">Kết nối với K</a> 
</div> 
</div> 
<div class="hero-card">
  <div class="hero-img" aria-label="Hero art">
    <img 
      alt="One Piece collage" 
      src="https://images3.alphacoders.com/134/thumb-1920-1342304.jpeg" 
      style="width:100%; height:auto; border-radius:1rem;"
    >
  </div>
  <div style="display:flex; gap:.6rem; margin-top:.7rem; flex-wrap:wrap">
    <span class="chip">#GrandLine</span>
    <span class="chip">#StrawHats</span>
    <span class="chip">#Haki</span>
    <span class="chip">#Theory</span>
  </div>
</div>
 </div> 
</header>

  <!-- ABOUT -->
  <section id="about">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Giới thiệu</h2>
          <p class="lead">Tôi là <strong>N.K</strong> – thích kể chuyện, sưu tầm ảnh đẹp, và soi lore One Piece theo cách gọn gàng, dễ đọc.</p>
        </div>
        <a class="btn" href="#contact">Gửi lời nhắn</a>
      </div>
      <div class="grid cols-3">
        <article class="card">
          <div class="thumb" style="background:linear-gradient(135deg, rgba(56,189,248,.2), rgba(167,139,250,.2))"></div>
          <div class="body">
            <div class="title">Mục tiêu</div>
            <p class="lead">Lưu trữ hồ sơ nhân vật, phân tích arc, và tổng hợp giả thuyết chất lượng cao – tất cả ở một nơi.</p>
            <div class="tags"><span class="chip">lưu trữ</span><span class="chip">phân tích</span></div>
          </div>
        </article>
        <article class="card">
          <div class="thumb" style="background:linear-gradient(135deg, rgba(16,185,129,.25), rgba(56,189,248,.2))"></div>
          <div class="body">
            <div class="title">Nguyên tắc</div>
            <p class="lead">Chính xác, có nguồn, tránh spoil vô tội vạ. Tôn trọng tác giả và cộng đồng.</p>
            <div class="tags"><span class="chip">tôn trọng</span><span class="chip">chất lượng</span></div>
          </div>
        </article>
        <article class="card">
          <div class="thumb" style="background:linear-gradient(135deg, rgba(245,158,11,.25), rgba(239,68,68,.2))"></div>
          <div class="body">
            <div class="title">Công cụ</div>
            <p class="lead">Website thuần HTML/CSS/JS tối ưu, không phụ thuộc framework. Dễ deploy trên GitHub Pages/Netlify.</p>
            <div class="tags"><span class="chip">HTML</span><span class="chip">CSS</span><span class="chip">JS</span></div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- CREW -->
  <section id="crew">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Băng Mũ Rơm</h2>
          <p class="lead">Tìm tên nhanh nhân vật bạn thích.</p>
        </div>
        <div class="searchbar" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="1.6"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/></svg>
          <input id="search" placeholder="Tìm tên, vai trò, haki…" aria-label="Tìm kiếm nhân vật" />
        </div>
      </div>

      <div id="crewGrid" class="grid cols-4" aria-live="polite"></div>
    </div>
  </section>

<!-- OTHER CHARACTERS -->
<section id="others">
  <div class="container">
    <div class="section-head">
      <div>
        <h2>Các nhân vật khác</h2>
        <p class="lead">Những nhân vật quan trọng ngoài băng Mũ Rơm.</p>
      </div>
<div class="searchbar" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="1.6"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/></svg>
          <input id="search" placeholder="Tìm tên, vai trò, haki…" aria-label="Tìm kiếm nhân vật" />
    </div>
</div>

    <div id="othersGrid" class="grid cols-4" aria-live="polite"></div>
  </div>
</section>

  <!-- GALLERY -->
<section id="gallery">
  <div class="container">
    <div class="section-head">
      <div>
        <h2>Bộ sưu tập nổi bật</h2>
        <p class="lead">Slideshow tự động chuyển.</p>
      </div>
      <a class="btn" href="#">Tải thêm sau</a>
    </div>
    <div class="slider" aria-roledescription="carousel" aria-label="Slideshow ảnh One Piece">
      <div class="slides" id="slides">
        <!-- Thay src bằng ảnh thật của bạn -->
        <div class="slide">
          <img alt="Ảnh 1" src="https://images.alphacoders.com/136/thumb-1920-1360737.png" />
        </div>
        <div class="slide">
          <img alt="Ảnh 2" src="https://i.pinimg.com/736x/5e/b5/e7/5eb5e73a1fafa8570a422d4712d3a07a.jpg" />
        </div>
        <div class="slide">
          <img alt="Ảnh 3" src="https://scontent.fsgn22-1.fna.fbcdn.net/v/t39.30808-6/475535044_1147254820101371_1724313246481124439_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeH_ww838iW2ZxwdT8hspo_Vj-HPQMH8aLOP4c9Awfxos7rcEoqNFEQL4CyO2RchrPB2MUZ_QQTaQJivV36F-SmR&_nc_ohc=Hm1jbI20eVUQ7kNvwH1SiNJ&_nc_oc=Admhh8xB0ExX8ua3IikKxCsMzpQ85LNLP393y7ESSU4SlNaMRmTN4st4OCNb3Gmi5rkK-R3ujMaoYbezNU0V7BGU&_nc_zt=23&_nc_ht=scontent.fsgn22-1.fna&_nc_gid=sDQiS2okpd4m3ptE9TXRZg&oh=00_AfUMIJlNruIYpxiwd5eztByrNDkcz_sbKUozs6fE_enmQg&oe=68A89DEE" />
        </div>
      </div>
      <div class="dots" id="dots" aria-hidden="true"></div>
    </div>
  </div>
</section>

  <!-- TIMELINE -->
  <section id="timeline">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Timeline hành trình</h2>
          <p class="lead">Các cột mốc mình yêu thích.</p>
        </div>
      </div>
      <div class="timeline" id="timelineList"></div>
    </div>
  </section>

  <!-- BLOG / NOTES -->
  <section id="blog">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Blog & Ghi chú</h2>
          <p class="lead">Bài viết ngắn, cảm nhận, hoặc lý thuyết – không spoil tiêu cực.</p>
        </div>
        <a class="btn" href="#contact">Gợi ý chủ đề?</a>
      </div>
      <div class="grid cols-3" id="postGrid"></div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Liên hệ</h2>
          <p class="lead">Bạn có góp ý hay muốn hợp tác? Cứ nhắn nhé!</p>
        </div>
      </div>
      <form class="card" onsubmit="event.preventDefault(); alert('Đã ghi nhận! (Cần backend để gửi mail thực)')" aria-label="Form liên hệ">
        <div class="body" style="gap:.8rem">
          <label>Họ tên<br><input required placeholder="Tên của bạn" style="width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text)"></label>
          <label>Email<br><input required type="email" placeholder="you@example.com" style="width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text)"></label>
          <label>Nội dung<br><textarea required rows="4" placeholder="Mình muốn góp ý…" style="width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text)"></textarea></label>
          <div style="display:flex; gap:.6rem; align-items:center; justify-content:space-between">
            <label style="display:flex; align-items:center; gap:.5rem; color:var(--muted)"><input type="checkbox" required> Đồng ý chính sách riêng tư</label>
            <button class="btn primary" type="submit">Gửi</button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1rem">
      <div>© <span id="year"></span> • N.K • One Piece Fanpage (phi thương mại)</div>
      <div style="display:flex; gap:.6rem; align-items:center">
        <a class="chip" href="#home">Lên đầu trang</a>
        <a class="chip" href="#about">Giới thiệu</a>
      </div>
    </div>
  </footer>

  <!-- MODAL -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="modal-head">
        <strong id="modalTitle">Hồ sơ nhân vật</strong>
        <button class="close" aria-label="Đóng" onclick="toggleModal(false)">✕</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

<script>
  // ======= DATA (có ảnh chuẩn) =======
  const crew = [
    { name: 'Monkey D. Luffy', role: 'Thuyền trưởng', bounty: '3,000,000,000', haki: ['Haki Vũ Trang (Busōshoku no Haki)','Haki Quan Sát (Kenbunshoku no Haki)','Haki Bá Vương (Haōshoku no Haki)'], fruit: 'Hito Hito no Mi, Model: Nika', img: 'https://media1.tenor.com/m/Qm01Xi99XvgAAAAd/luffy-gear-5.gif', quote: 'Ta là Monkey D. Luffy, và ta sẽ trở thành Vua Hải Tặc! Shishishi.' },
    { name: 'Roronoa Zoro', role: 'Kiếm sĩ', bounty: '1,111,000,000', haki: ['Haki Vũ trang','Haki Quan sát', 'Haki Bá Vương (Được Gaban xác nhận)'], fruit: null, img: 'https://media1.tenor.com/m/4sYOFaCmMcoAAAAd/one-piece-zoro-vs-king.gif', quote: '<p>Tôi sẽ không bao giờ thua nữa, có ý kiến gì không Vua Hải Tặc tương lai?!<br><br>Để giúp Luffy trở thành Vua Hải Tặc, ta sẽ trở thành King Of Hell (Vua Địa Ngục)</p>' },
    { name: 'Nami', role: 'Hoa tiêu', bounty: '366,000,000', haki: [], fruit: null, img: 'https://media1.tenor.com/m/19dEzrdZqDIAAAAC/nami.gif', quote: '<p>Ước mơ của tôi là vẽ bản đồ toàn thế giới!<br><br>Luffy chắc chắn sẽ trở thành Vua Hải Tặc!</p>' },
    { name: 'Usopp', role: 'Xạ thủ', bounty: '500,000,000', haki: ['Haki Quan sát'], fruit: null, img: 'https://media1.tenor.com/m/u0INc77fl3IAAAAC/god-usopp.gif', quote: '<p>Tôi sẽ trở thành chiến binh dũng cảm nhất biển cả!<br><br>Tôi không quan tâm nếu trông thật thảm hại! Tôi sống sót, đó là những gì tôi làm! Và đó là lý do tôi ở đây!</p>' },
    { name: 'Sanji', role: 'Đầu bếp', bounty: '1,032,000,000', haki: ['Haki Vũ trang','Haki Quan sát'], fruit: null, img: 'https://media1.tenor.com/m/Q-8_BLg-Zq8AAAAC/one-piece-sanji.gif', quote: 'Tôi sẽ làm những việc cậu không thể làm và cậu sẽ làm những thứ tôi không làm được.' },
    { name: 'Tony Tony Chopper', role: 'Bác sĩ', bounty: '1,000', haki: [], fruit: 'Hito Hito no Mi', img: 'https://media1.tenor.com/m/-uumzerEK8EAAAAd/egghead-one-piece.gif', quote: '<p>Trước kia, lý do em muốn trở thành con người là vì muốn có bạn.<br><br>Giờ thì để giúp được anh Luffy và mọi người em sẽ trở thành một con quái <br><br>À nè, kẹo bông ngon lắm luôn cậu nên thử :3</p>' },
    { name: 'Nico Robin', role: 'Nhà khảo cổ', bounty: '930,000,000', haki: [], fruit: 'Hana Hana no Mi', img: 'https://media1.tenor.com/m/2vWJVIz0aYkAAAAC/demon-demon-nico-robin.gif', quote: '<p>TÔI MUỐN ĐƯỢC SỐNG.<br><br>Vì đồng đội, ta sẽ trở thành một con quỷ!<br><br>Con muốn ông khen con vì đã sống được tới giờ, ông Saul!</p>' },
    { name: 'Franky', role: 'Thợ đóng tàu', bounty: '394,000,000', haki: [], fruit: null, img: 'https://media1.tenor.com/m/mB3YB5lkCdIAAAAd/franky-franky-one-piece.gif', quote: '<p>SUUUUUPERRRRR!!<br><br>Tôi cũng muốn… một ngày nào đó tự tay đóng nên một con tàu trong mơ. Một con tàu hiên ngang, kiêu hãnh lao đi giữa cả những con sóng chưa ai từng chạm đến, ở tận cùng rìa thế giới! Một con tàu như thế… mới xứng đáng với giấc mơ của tôi!</p>' },
    { name: 'Brook', role: 'Nhạc công', bounty: '383,000,000', haki: ['Haki Quan sát'], fruit: 'Yomi Yomi no Mi', img: 'https://media.tenor.com/-rkmO7BEJHQAAAAM/brook.gif', quote: 'Yohohoho~' },
    { name: 'Jinbe', role: 'Tay lái/Chiến binh cá mập', bounty: '1,100,000,000', haki: ['Haki Vũ trang','Haki Quan sát'], fruit: null, img: 'https://media1.tenor.com/m/avDO-bs-b34AAAAd/jinbe-jimbei.gif', quote: 'Jujutsu Thủy quyền.' }
  ];

  const others = [
    { name: 'Boa Hancock', role: 'Nữ hoàng hải tặc', bounty: '1,659,000,000', haki: ['Haki Vũ trang','Haki Quan sát','Haki Bá Vương'], fruit: 'Mero Mero no Mi', img: 'https://media1.tenor.com/m/cPeAsi9pPGsAAAAd/one-piece-boa-hancock.gif', quote: '<p>Dù ta có làm gì đi nữa, tất cả mọi việc ta làm đều sẽ được tha thứ… vì ta quá đẹp!<br><br>Luffy không giống bất kỳ ai khác… vì vậy ta mới yêu anh ấy.</p>' },
    { name: 'Bartholomew Kuma', role: '<p>Cựu Thất Vũ Hải.<br><br>Cha của Jewelry Bonney.<br><br>Thành viên Quân Cách Mạng (bí mật).<br><br>Cựu quốc vương Sorbet.</p>', bounty: '296,000,000', haki: ['Haki Vũ Trang'], fruit: 'Nikyu Nikyu no Mi', img: 'https://media1.tenor.com/m/YqsolrcnGV4AAAAd/one-piece-egghead.gif', quote: 'Nếu ngươi chịu được nó, ta sẽ để các ngươi sống (Kuma vs Zoro)<br><br>Ta sẽ bảo vệ con tàu này đến ngày chúng quay lại.<br><br>Nếu người ta sinh ra đã định sẵn đời nô lệ... Thì còn ra đời làm gì nữa? (Kuma vs Saturn)<br><br>Em hãy an giấc nhé Ginny... Anh hứa... sẽ nuôi con lớn khôn<br><br>Vị thánh ư? Tôi chỉ là... Một Paci-Fista (Người yêu hòa bình) bé nhỏ mà thôi (Kuma vs Vegapunk).<br><br>Tôi sẽ đón nhận bất kỳ số mệnh nào... Miễn là Bonney được cứu chữa!<br><br>Thằng nhỏ ra tay để bảo vệ cho một người cá! Luffy Mũ Rơm... Chưa từng có kẻ nào dám ra tay dứt khoát như thế... Suốt hàng trăm năm nay! Đó là phản loạn!!<br><br>Con nhầm rồi...!! Ta chỉ cho con thấy được đẳng cấp sức mạnh con cần phải có được ở tân thế giới mà thôi. Con và những người bạn con còn chưa sẵn sàng đâu. Đừng vội đi vào đó... Nhé... Một ngày nào đó các con sẽ... cứu lấy thế giới này!!<br><br>Tôi không thể nói mình biết ơn bao nhiêu cho đủ... Cảm ơn ông vì đã cứu Bonney!! Nếu ông gặp lại con bé... Xin nhờ ông... Nói giùm với nó một câu này nha!<br><br>Chúc mừng sinh nhật 10 tuổi của con, Bonney!!' },
  ];

const othersGrid = document.getElementById('othersGrid');
  function renderOthers(list){
    othersGrid.innerHTML = list.map((c,i)=>`
      <article class="card" tabindex="0" role="button" 
        onclick="openProfileOthers(${i})" 
        onkeypress="if(event.key==='Enter')openProfileOthers(${i})">
        <div class="thumb">${c.img?`<img alt="${c.name}" src="${c.img}" loading="lazy">`:''}</div>
        <div class="body">
          <div class="title">${c.name}</div>
          <div class="lead" style="color:var(--muted)">${c.role}</div>
          <div class="tags">
            ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
            ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
            <span class='chip'>💰 ${c.bounty}</span>
          </div>
<div class="like-btn" onclick="event.stopPropagation();likeCharacter('others', ${i})">
  ❤️ ${c.likes || 0}
</div>
        </div>
      </article>
    `).join('');
  }
  renderOthers(others);

  function openProfileOthers(i){
    const c = others[i];
    const body = `
      <div style="display:grid; grid-template-columns: 1fr 1.2fr; gap:1rem; align-items:start">
        <div>
          <div class="thumb" style="border-radius:14px; overflow:hidden">${c.img?`<img alt="${c.name}" src="${c.img}">`:''}</div>
        </div>
        <div>
          <h3 id="modalTitle" style="margin:.2rem 0">${c.name}</h3>
          <p style="color:var(--muted); margin:.2rem 0">${c.role}</p>
          <div class="tags" style="margin:.4rem 0">
            ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
            ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
            <span class='chip'>💰 ${c.bounty}</span>
          </div>
          <blockquote style="margin:.8rem 0; color:#e2e8f0; border-left:3px solid rgba(56,189,248,.45); padding-left:.8rem">“${c.quote||''}”</blockquote>
        </div>
      </div>`;
    document.getElementById('modalBody').innerHTML = body;
    toggleModal(true);
  }

  const timeline = [
    { year: 'East Blue', title: 'Khởi hành', text: 'Gặp từng thành viên, đặt nền móng cho giấc mơ.' },
    { year: 'Alabasta', title: 'Bảo vệ vương quốc', text: 'Hành trình cứu Vivi và đối đầu Crocodile.' },
    { year: 'Enies Lobby', title: 'Gõ cửa công lý', text: '“Tôi muốn sống!” – cột mốc cảm xúc.' },
    { year: 'Marineford', title: 'Chiến trường đỉnh cao', text: 'Bi kịch và cú hích trưởng thành.' },
    { year: 'Wano', title: 'Khai mở thời đại mới', text: 'Liên minh, Haki và giấc mơ gần hơn.' },
  ];

  const posts = [
    { title: 'Haki Bá Vương – bản chất là gì?', excerpt: 'Tổng hợp lý thuyết và ví dụ minh họa.', date: '2025-08-01' },
    { title: '5 khoảnh khắc Robin làm tim tan chảy', excerpt: 'Kho ảnh + phân tích cảm xúc.', date: '2025-07-18' },
    { title: 'Zoro vs King – điểm bùng nổ sức mạnh', excerpt: 'Mổ xẻ cơ chế “lửa” và sức bền.', date: '2025-06-30' },
  ];
    // ======= RUNTIME =======
    const $ = (s, root=document) => root.querySelector(s);
    const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));

    // Render crew cards
    function renderCrew(list){
  crewGrid.innerHTML = list.map((c,i)=>`
    <article class="card" tabindex="0" role="button"
      onclick="openProfile(${i})" 
      onkeypress="if(event.key==='Enter')openProfile(${i})">
      <div class="thumb">${c.img?`<img alt="${c.name}" src="${c.img}" loading="lazy">`:''}</div>
      <div class="body">
  <div class="title">${c.name}</div>
  <div class="lead" style="color:var(--muted)">${c.role}</div>
  <div class="tags">
    ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
    ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
    <span class='chip'>💰 ${c.bounty}</span>
  </div>
</div>
<div class="like-btn" onclick="event.stopPropagation();likeCharacter('crew', ${i})">
  ❤️ ${c.likes || 0}
</div>
      </div>
    </article>
  `).join('');
}

    // Search
    const search = $('#search');
    search.addEventListener('input', e=>{
      const q = e.target.value.toLowerCase().trim();
      const filtered = crew.filter(c=>
        c.name.toLowerCase().includes(q) ||
        c.role.toLowerCase().includes(q) ||
        (c.fruit||'').toLowerCase().includes(q) ||
        (c.haki||[]).join(' ').toLowerCase().includes(q)
      );
      renderCrew(filtered);
    });

    // Modal profile
    const modal = $('#modal');
    function openProfile(i){
      const c = (search.value? crew.filter(x=> x.name.toLowerCase().includes(search.value.toLowerCase()) || x.role.toLowerCase().includes(search.value.toLowerCase()) || (x.fruit||'').toLowerCase().includes(search.value.toLowerCase()) || (x.haki||[]).join(' ').toLowerCase().includes(search.value.toLowerCase())) : crew)[i];
      const body = `
        <div style="display:grid; grid-template-columns: 1fr 1.2fr; gap:1rem; align-items:start">
          <div>
            <div class="thumb" style="border-radius:14px; overflow:hidden">${c.img?`<img alt="${c.name}" src="${c.img}">`:''}</div>
          </div>
          <div>
            <h3 id="modalTitle" style="margin:.2rem 0">${c.name}</h3>
            <p style="color:var(--muted); margin:.2rem 0">${c.role}</p>
            <div class="tags" style="margin:.4rem 0">
              ${c.haki?.map(h=>`<span class='chip'>${h}</span>`).join('')}
              ${c.fruit?`<span class='chip'>🍏 ${c.fruit}</span>`:''}
              <span class='chip'>💰 ${c.bounty}</span>
            </div>
            <blockquote style="margin:.8rem 0; color:#e2e8f0; border-left:3px solid rgba(56,189,248,.45); padding-left:.8rem">“${c.quote||''}”</blockquote>
          </div>
        </div>`;
      $('#modalBody').innerHTML = body;
      toggleModal(true);
    }
    function toggleModal(show){ modal.classList.toggle('active', !!show); }
    modal.addEventListener('click', e=>{ if(e.target===modal) toggleModal(false); });

function likeCharacter(type, i){
  if(type === 'crew'){
    crew[i].likes = (crew[i].likes || 0) + 1;
    renderCrew(crew);
  } else {
    others[i].likes = (others[i].likes || 0) + 1;
    renderOthers(others);
  }
}

    // Slider
    const slides = $('#slides');
    const dotsWrap = $('#dots');
    let idx = 0; let N = $$('.slide', slides).length;
    function renderDots(){ dotsWrap.innerHTML = Array.from({length:N}, (_,i)=>`<button class='dot ${i===idx?'active':''}' aria-label='Tới ảnh ${i+1}' onclick='go(${i})'></button>`).join(''); }
    function go(i){ idx = (i+N)%N; slides.style.transform = `translateX(-${idx*100}%)`; renderDots(); }
    setInterval(()=> go(idx+1), 5000);

    // Timeline
    const tlist = $('#timelineList');
    tlist.innerHTML = timeline.map(t=>`<div class='titem'><div class='chip'>${t.year}</div><h4>${t.title}</h4><p>${t.text}</p></div>`).join('');

    // Posts
    const pgrid = $('#postGrid');
    pgrid.innerHTML = posts.map(p=>`<article class='card'><div class='thumb' style='background:linear-gradient(135deg, rgba(56,189,248,.16), rgba(167,139,250,.16))'></div><div class='body'><div class='title'>${p.title}</div><p class='lead'>${p.excerpt}</p><div class='tags'><span class='chip'>${new Date(p.date).toLocaleDateString('vi-VN')}</span></div></div></article>`).join('');

    // Init
    renderCrew(crew);
    renderDots();
    go(0);
    $('#year').textContent = new Date().getFullYear();

// Mảng trạng thái like cho từng nhóm
let likedCrew = [];
let likedOthers = [];

function likeCharacter(type, i){
  if(type === 'crew'){
    crew[i].likes = crew[i].likes || 0;
    if(likedCrew[i]) {
      // bỏ like
      crew[i].likes--;
      likedCrew[i] = false;
    } else {
      // thêm like
      crew[i].likes++;
      likedCrew[i] = true;
    }
    renderCrew(crew);
  } else {
    others[i].likes = others[i].likes || 0;
    if(likedOthers[i]) {
      others[i].likes--;
      likedOthers[i] = false;
    } else {
      others[i].likes++;
      likedOthers[i] = true;
    }
    renderOthers(others);
  }
}
</script>
</body>
</html>
